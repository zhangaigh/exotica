

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using EXOTica &mdash; EXOTica 5.0-beta1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting Started With Your Own Robot" href="Getting-Started-With-Your-Own-Robot.html" />
    <link rel="prev" title="Setting up Problems and Solvers" href="Setting-up-problems-and-solvers.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> EXOTica
          

          
          </a>

          
            
            
              <div class="version">
                5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Quickstart-python.html">Quickstart: Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Quickstart-cpp.html">Quickstart: C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="Setting-up-problems-and-solvers.html">Setting up Problems and Solvers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using EXOTica</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-start-position">Setting Start Position</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solution-container">Solution Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="#goal-setting">Goal Setting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solving-problems">Solving Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solution-format">Solution Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#publishing-to-rviz">Publishing to RVIZ</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Getting-Started-With-Your-Own-Robot.html">Getting Started With Your Own Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="Initialization.html">Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="XML.html">XML Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="XML-Parsing.html">XML Parsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Manual-Initialization.html">Manual Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="Common-Initialization-Step.html">Common Initialization Step</a></li>
<li class="toctree-l1"><a class="reference internal" href="Setting-up-ROSlaunch.html">Setting up ROSlaunch</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Initializers.html">Initializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Task_maps.html">Task Maps</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Code-Formatting.html">Code Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python-API.html">Python Bindings</a></li>
<li class="toctree-l1"><a class="reference external" href="./doxygen_cpp/index.html#http://">Doxygen C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation.html">Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EXOTica</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using EXOTica</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-exotica">
<h1>Using EXOTica<a class="headerlink" href="#using-exotica" title="Permalink to this headline">¶</a></h1>
<p>This part of the tutorial assumes that you have completed the previous
step. We will work off the same code and get on with solving some motion
plans.</p>
<p>We will continue to use the exotica example found in
<code class="docutils literal notranslate"><span class="pre">manual.cpp</span></code> as a reference, starting after we sent the problem to
the solver:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>    <span class="p">...</span>

    <span class="c1">// Continued from initialization</span>
    <span class="c1">// Create the initial configuration</span>
    <span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span> <span class="n">q</span> <span class="o">=</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="o">::</span><span class="n">Zero</span><span class="p">(</span><span class="n">any_problem</span><span class="o">-&gt;</span><span class="n">getScene</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getNumControlledJoints</span><span class="p">());</span>
    <span class="n">Eigen</span><span class="o">::</span><span class="n">MatrixXd</span> <span class="n">solution</span><span class="p">;</span>


    <span class="n">ROS_INFO_STREAM</span><span class="p">(</span><span class="s">&quot;Calling solve() in an infinite loop&quot;</span><span class="p">);</span>

    <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
    <span class="n">ros</span><span class="o">::</span><span class="n">Rate</span> <span class="n">loop_rate</span><span class="p">(</span><span class="mf">500.0</span><span class="p">);</span>
    <span class="n">ros</span><span class="o">::</span><span class="n">WallTime</span> <span class="n">init_time</span> <span class="o">=</span> <span class="n">ros</span><span class="o">::</span><span class="n">WallTime</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">ros</span><span class="o">::</span><span class="n">ok</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">ros</span><span class="o">::</span><span class="n">WallTime</span> <span class="n">start_time</span> <span class="o">=</span> <span class="n">ros</span><span class="o">::</span><span class="n">WallTime</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>

        <span class="c1">// Update the goal if necessary</span>
        <span class="c1">// e.g. figure eight</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">ros</span><span class="o">::</span><span class="n">Duration</span><span class="p">((</span><span class="n">ros</span><span class="o">::</span><span class="n">WallTime</span><span class="o">::</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">init_time</span><span class="p">).</span><span class="n">toSec</span><span class="p">()).</span><span class="n">toSec</span><span class="p">();</span>
        <span class="n">my_problem</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="mf">0.6</span><span class="p">,</span>
                        <span class="o">-</span><span class="mf">0.1</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">M_PI</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span>
                         <span class="mf">0.5</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="n">M_PI</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">;</span>

        <span class="c1">// Solve the problem using the IK solver</span>
        <span class="n">any_solver</span><span class="o">-&gt;</span><span class="n">Solve</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">solution</span><span class="p">);</span>

        <span class="kt">double</span> <span class="n">time</span> <span class="o">=</span> <span class="n">ros</span><span class="o">::</span><span class="n">Duration</span><span class="p">((</span><span class="n">ros</span><span class="o">::</span><span class="n">WallTime</span><span class="o">::</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">).</span><span class="n">toSec</span><span class="p">()).</span><span class="n">toSec</span><span class="p">();</span>
        <span class="n">ROS_INFO_STREAM_THROTTLE</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="s">&quot;Finished solving in &quot;</span><span class="o">&lt;&lt;</span><span class="n">time</span><span class="o">&lt;&lt;</span><span class="s">&quot;s. Solution [&quot;</span><span class="o">&lt;&lt;</span><span class="n">solution</span><span class="o">&lt;&lt;</span><span class="s">&quot;]&quot;</span><span class="p">);</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">solution</span><span class="p">.</span><span class="n">row</span><span class="p">(</span><span class="n">solution</span><span class="p">.</span><span class="n">rows</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>

        <span class="n">my_problem</span><span class="o">-&gt;</span><span class="n">Update</span><span class="p">(</span><span class="n">q</span><span class="p">);</span>
        <span class="n">my_problem</span><span class="o">-&gt;</span><span class="n">getScene</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getSolver</span><span class="p">().</span><span class="n">publishFrames</span><span class="p">();</span>

        <span class="n">ros</span><span class="o">::</span><span class="n">spinOnce</span><span class="p">();</span>
        <span class="n">loop_rate</span><span class="p">.</span><span class="n">sleep</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// All classes will be destroyed at this point.</span>
<span class="p">}</span>
<span class="p">...</span>
</pre></div>
</div>
<p class="rubric">CODE EXPLAINED</p>
<div class="section" id="setting-start-position">
<h2>Setting Start Position<a class="headerlink" href="#setting-start-position" title="Permalink to this headline">¶</a></h2>
<p>Firstly, we must set up a vector of initial joint variables to be fed
into the solver. Here we initialize the joints to zero angles:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span> <span class="n">q</span> <span class="o">=</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="o">::</span><span class="n">Zero</span><span class="p">(</span><span class="n">any_problem</span><span class="o">-&gt;</span><span class="n">getScene</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getNumControlledJoints</span><span class="p">());</span>
</pre></div>
</div>
<p>Using the robot description to determine the size
of the vector (<code class="docutils literal notranslate"><span class="pre">any_problem-&gt;getScene()-&gt;getNumControlledJoints()</span></code>). This vector
can naturally be changed to whatever joint configuration is required for
your motion planning purposes. for example, after instantiating <code class="docutils literal notranslate"><span class="pre">q</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">&lt;&lt;</span> <span class="n">joint_start</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">joint_start</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">joint_start</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">joint_start</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">joint_start</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="n">joint_start</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">joint_start</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
</pre></div>
</div>
<p>and so on. This init joint configuration vector will be sent to the
solver later.</p>
</div>
<div class="section" id="solution-container">
<h2>Solution Container<a class="headerlink" href="#solution-container" title="Permalink to this headline">¶</a></h2>
<p>When we do call the solver, we will get the motion plan back as an
n*DOF matrix, where n is the number of steps along the trajectory. A
dynamic matrix container will need to be created to hold this.
This is created in the next line:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Eigen</span><span class="o">::</span><span class="n">MatrixXd</span> <span class="n">solution</span><span class="p">;</span>
</pre></div>
</div>
<p>Now we have a starting point and something to hold the trajectory, we
need somewhere to go. It’s time to set the goal.</p>
</div>
<div class="section" id="goal-setting">
<h2>Goal Setting<a class="headerlink" href="#goal-setting" title="Permalink to this headline">¶</a></h2>
<p>Methods of goal setting vary according to the problem and your
requirements. Two methods exist for the IK_solver. The method used in
the tutorial specifies the goal for all IK_solver task maps by setting
the <code class="docutils literal notranslate"><span class="pre">y</span></code> value to the desired goal:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">my_problem</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="mf">0.6</span><span class="p">,</span>  <span class="c1">// X Position</span>
                <span class="o">-</span><span class="mf">0.1</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">M_PI</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span> <span class="c1">// Y Position</span>
                 <span class="mf">0.5</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="n">M_PI</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">;</span> <span class="c1">// Z Position</span>
</pre></div>
</div>
<p>NOTE: To set the goal for an individual map, use the <code class="docutils literal notranslate"><span class="pre">setGoal()</span></code>
function. This requires the name of the task map and a Eigen vector
containing the Cartesian coordinates of the goal:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span> <span class="n">goal</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

<span class="n">goal</span> <span class="o">&lt;&lt;</span> <span class="mf">0.6</span><span class="p">,</span><span class="mf">0.8</span><span class="p">,</span><span class="mf">0.5</span><span class="p">;</span>

<span class="n">my_problem</span><span class="o">-&gt;</span><span class="n">setGoal</span><span class="p">(</span><span class="s">&quot;Position&quot;</span><span class="p">,</span><span class="n">goal</span><span class="p">);</span>
</pre></div>
</div>
<p>Now the initial joint positions have been set, we have the solution
container and have set the goal, we are ready to solve the problem using
the <code class="docutils literal notranslate"><span class="pre">any_solver</span></code> container in which we stored the generic solver in
earlier, passing the initial joint states <code class="docutils literal notranslate"><span class="pre">q</span></code> and the trajectory
holder:</p>
</div>
<div class="section" id="solving-problems">
<h2>Solving Problems<a class="headerlink" href="#solving-problems" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">any_solver</span><span class="o">-&gt;</span><span class="n">Solve</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">solution</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="solution-format">
<h2>Solution Format<a class="headerlink" href="#solution-format" title="Permalink to this headline">¶</a></h2>
<p>Now we have a solution to our problem. But what does it look like?</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span> INFO<span class="o">]</span> <span class="o">[</span><span class="m">1501240815</span>.111167097<span class="o">]</span>: Finished solving in <span class="m">3</span>.085e-05s. Solution <span class="o">[</span>  -0.109557   -0.653855  -0.0687444     <span class="m">1</span>.28515 <span class="m">1</span>.06079e-17           <span class="m">0</span>           <span class="m">0</span><span class="o">]</span>
</pre></div>
</div>
<p>When using the IK_solver as in this tutorial and we set the <code class="docutils literal notranslate"><span class="pre">MaxIterations</span></code> to a
low number, we get single step solution to the IK problem, as shown above -
this is what you would expect to see if you run this code;
it shows a vector of angles, one column  for each joint in our
robot. Each entry a joint configuration in radians, which will result in
the end effector reaching the desired target. The rows of the output
represent the positional steps each joint must pass through to reach
the end effector goal. When using a higher <code class="docutils literal notranslate"><span class="pre">MaxIterations</span></code> setting, the number
of rows in your motion plan would likely increase.</p>
<p>When using other problems or a different configuration of the
<code class="docutils literal notranslate"><span class="pre">UnconstrainedEndPoseProblem</span></code>, trajectories will start to look a
little more substantial. The output below shows the format of a solution
after being solved by the <code class="docutils literal notranslate"><span class="pre">OMPLSolver</span></code>. Note that this solution was
computed for a 6DOF robot and thus contains 6 columns. The first row
represents the initial joint configuration, which here we set to zeros.
The final row shows the configuration of the robot which allows the
end-effector to reach the goal. The intermediate rows are the positional
configurations that transfer the arm from start to end.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Solution</span><span class="p">:</span>
   <span class="p">[</span>       <span class="mi">0</span>            <span class="mi">0</span>            <span class="mi">0</span>            <span class="mi">0</span>              <span class="mi">0</span>     <span class="mf">1.63042e-322</span>
    <span class="mf">0.134729</span>   <span class="mf">0.00623148</span>  <span class="o">-</span><span class="mf">0.00439002</span>     <span class="o">-</span><span class="mf">0.0770144</span>   <span class="o">-</span><span class="mf">6.41669e-18</span>   <span class="mf">1.63042e-322</span>
    <span class="mf">0.269458</span>     <span class="mf">0.012463</span>  <span class="o">-</span><span class="mf">0.00878005</span>     <span class="o">-</span><span class="mf">0.154029</span>    <span class="o">-</span><span class="mf">1.28334e-17</span>   <span class="mf">1.63042e-322</span>
    <span class="mf">0.404187</span>    <span class="mf">0.0186944</span>   <span class="o">-</span><span class="mf">0.0131701</span>     <span class="o">-</span><span class="mf">0.231043</span>    <span class="o">-</span><span class="mf">1.92501e-17</span>   <span class="mf">1.63042e-322</span>
    <span class="mf">0.538915</span>    <span class="mf">0.0249259</span>   <span class="o">-</span><span class="mf">0.0175601</span>     <span class="o">-</span><span class="mf">0.308058</span>    <span class="o">-</span><span class="mf">2.56668e-17</span>   <span class="mf">1.63042e-322</span>
    <span class="mf">0.673644</span>    <span class="mf">0.0311574</span>   <span class="o">-</span><span class="mf">0.0219501</span>     <span class="o">-</span><span class="mf">0.385072</span>    <span class="o">-</span><span class="mf">3.20835e-17</span>   <span class="mf">1.63042e-322</span>
    <span class="mf">0.808373</span>    <span class="mf">0.0373889</span>   <span class="o">-</span><span class="mf">0.0263401</span>     <span class="o">-</span><span class="mf">0.462086</span>    <span class="o">-</span><span class="mf">3.85001e-17</span>   <span class="mf">1.63042e-322</span>
    <span class="mf">0.943102</span>    <span class="mf">0.0436204</span>   <span class="o">-</span><span class="mf">0.0307302</span>     <span class="o">-</span><span class="mf">0.539101</span>    <span class="o">-</span><span class="mf">4.49168e-17</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">1.07783</span>    <span class="mf">0.0498519</span>   <span class="o">-</span><span class="mf">0.0351202</span>     <span class="o">-</span><span class="mf">0.616115</span>    <span class="o">-</span><span class="mf">5.13335e-17</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">1.21256</span>    <span class="mf">0.0560833</span>   <span class="o">-</span><span class="mf">0.0395102</span>     <span class="o">-</span><span class="mf">0.69313</span>     <span class="o">-</span><span class="mf">5.77502e-17</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">1.34729</span>    <span class="mf">0.0623148</span>   <span class="o">-</span><span class="mf">0.0439002</span>     <span class="o">-</span><span class="mf">0.770144</span>    <span class="o">-</span><span class="mf">6.41669e-17</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">1.48202</span>    <span class="mf">0.0685463</span>   <span class="o">-</span><span class="mf">0.0482903</span>     <span class="o">-</span><span class="mf">0.847158</span>    <span class="o">-</span><span class="mf">7.05836e-17</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">1.61675</span>    <span class="mf">0.0747778</span>   <span class="o">-</span><span class="mf">0.0526803</span>     <span class="o">-</span><span class="mf">0.924173</span>    <span class="o">-</span><span class="mf">7.70003e-17</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">1.75148</span>    <span class="mf">0.0810093</span>   <span class="o">-</span><span class="mf">0.0570703</span>     <span class="o">-</span><span class="mf">1.00119</span>     <span class="o">-</span><span class="mf">8.3417e-17</span>    <span class="mf">1.63042e-322</span>
      <span class="mf">1.8862</span>    <span class="mf">0.0872407</span>   <span class="o">-</span><span class="mf">0.0614603</span>     <span class="o">-</span><span class="mf">1.0782</span>      <span class="o">-</span><span class="mf">8.98337e-17</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">2.02093</span>    <span class="mf">0.0934722</span>   <span class="o">-</span><span class="mf">0.0658504</span>     <span class="o">-</span><span class="mf">1.15522</span>     <span class="o">-</span><span class="mf">9.62504e-17</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">2.15566</span>    <span class="mf">0.0997037</span>   <span class="o">-</span><span class="mf">0.0702404</span>     <span class="o">-</span><span class="mf">1.23223</span>     <span class="o">-</span><span class="mf">1.02667e-16</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">2.29039</span>     <span class="mf">0.105935</span>   <span class="o">-</span><span class="mf">0.0746304</span>     <span class="o">-</span><span class="mf">1.30924</span>     <span class="o">-</span><span class="mf">1.09084e-16</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">2.42512</span>     <span class="mf">0.112167</span>   <span class="o">-</span><span class="mf">0.0790204</span>     <span class="o">-</span><span class="mf">1.38626</span>     <span class="o">-</span><span class="mf">1.155e-16</span>     <span class="mf">1.63042e-322</span>
     <span class="mf">2.55985</span>     <span class="mf">0.118398</span>   <span class="o">-</span><span class="mf">0.0834105</span>     <span class="o">-</span><span class="mf">1.46327</span>     <span class="o">-</span><span class="mf">1.21917e-16</span>   <span class="mf">1.63042e-322</span>
     <span class="mf">2.69458</span>      <span class="mf">0.12463</span>   <span class="o">-</span><span class="mf">0.0878005</span>     <span class="o">-</span><span class="mf">1.54029</span>     <span class="o">-</span><span class="mf">1.28334e-16</span>   <span class="mf">1.63042e-322</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="publishing-to-rviz">
<h2>Publishing to RVIZ<a class="headerlink" href="#publishing-to-rviz" title="Permalink to this headline">¶</a></h2>
<p>We’ve set up or problem, solver and the rest and got our motion plan.
EXOTica has the functionality to visualize this in RVIZ, so you can see
your plan in action. The parts of the example code we are yet to mention
deals with this and we’ll go through it now.</p>
<p>As we cycle through our motion plan, we can update the joint states:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="n">solution</span><span class="p">.</span><span class="n">row</span><span class="p">(</span><span class="n">solution</span><span class="p">.</span><span class="n">rows</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>and we send them to the problem:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">my_problem</span><span class="o">-&gt;</span><span class="n">Update</span><span class="p">(</span><span class="n">q</span><span class="p">);</span>
</pre></div>
</div>
<p>Now we can publish those frames to the /joint_states topic to be read
by RVIZ:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">my_problem</span><span class="o">-&gt;</span><span class="n">getScene</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getSolver</span><span class="p">().</span><span class="n">publishFrames</span><span class="p">();</span>
</pre></div>
</div>
<p>RVIZ can either be set-up manually or via a
<a class="reference external" href="Setting-up-ROSlaunch.html">ROSlaunch</a>
file.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Getting-Started-With-Your-Own-Robot.html" class="btn btn-neutral float-right" title="Getting Started With Your Own Robot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Setting-up-problems-and-solvers.html" class="btn btn-neutral" title="Setting up Problems and Solvers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Vladimir Ivan, Yiming Yang, Wolfgang Merkt, Michael Camilleri, Sethu Vijayakumar - and contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'5.0-beta1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>